<%- include('../partials/head') %>
<style>
  body {
    background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
  }
  .purple-bg {
    background-color: #fff0ff;
  }
  .purple-btn {
    background-color: #8f5fe8;
  }
  .purple-btn:hover {
    background-color: #6c3fc5;
  }
  .purple-border:focus {
    border-color: #a259f7;
    box-shadow: 0 0 0 2px #e0c3fc;
  }
  .radio-checked:checked + span {
    color: #8f5fe8;
    font-weight: bold;
  }
  .radio-label span {
    transition: color 0.2s;
  }
</style>
</head>
<body>
  <%- include('../partials/nav') %>
  <div class="flex items-center justify-center min-h-screen">
    <div class="w-full max-w-md purple-bg p-8 rounded-2xl shadow-xl">
      <h2 class="text-2xl font-bold text-center mb-6 text-purple-700">Register as New</h2>
      <form class="space-y-4" action="/signup" method="post" id="signupForm" >
        <%- include("../partials/errors") %>
        <div class="flex justify-center space-x-6 mb-2">
          <label class="radio-label flex items-center cursor-pointer">
            <input type="radio" name="userType" value="guest" id="guest" class="radio-checked" checked hidden>
            <span class="px-2 py-1 rounded-lg" id="guestLabel">Guest</span>
          </label>
          <label class="radio-label flex items-center cursor-pointer">
            <input type="radio" name="userType" value="host" id="host" class="radio-checked" hidden>
            <span class="px-2 py-1 rounded-lg" id="hostLabel">Host</span>
          </label>
        </div>
        <!-- First & Last Name -->
        <div class="flex space-x-4">
          <div class="w-1/2">
            <label class="block mb-1 text-sm font-medium text-purple-700">First Name</label>
            <input type="text" value="<%= oldInput.firstName ? oldInput.firstName :"" %>" class="w-full px-4 py-2 border rounded-lg focus:outline-none purple-border" name="firstName" placeholder="First name" required>
          </div>
          <div class="w-1/2">
            <label class="block mb-1 text-sm font-medium text-purple-700">Last Name</label>
            <input type="text" value="<%= oldInput.lastName ? oldInput.lastName :"" %>" class="w-full px-4 py-2 border rounded-lg focus:outline-none purple-border" name="lastName" placeholder="Last name" required>
          </div>
        </div>
        <!-- Email -->
        <div>
          <label class="block mb-1 text-sm font-medium text-purple-700">Email</label>
          <input type="email" value="<%= oldInput.email ? oldInput.email :"" %>" class="w-full px-4 py-2 border rounded-lg focus:outline-none purple-border" name="email" placeholder="you@example.com" required>
        </div>
        <!-- Password -->
        <div>
          <label class="block mb-1 text-sm font-medium text-purple-700">Password</label>
          <input type="password"  class="w-full px-4 py-2 border rounded-lg focus:outline-none purple-border" name="password" id="password" placeholder="••••••••" required>
        </div>
        <!-- Confirm Password -->
        <div>
          <label class="block mb-1 text-sm font-medium text-purple-700">Confirm Password</label>
          <input type="password" class="w-full px-4 py-2 border rounded-lg focus:outline-none purple-border" name="confirmPassword" id="confirmPassword" placeholder="••••••••" required>
          <p id="passwordError" class="text-red-500 text-xs mt-1 hidden">Passwords do not match.</p>
        </div>
        <!-- Terms Checkbox -->
        <div class="flex items-center space-x-2">
          <input type="checkbox" id="terms" name="terms" class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded" required>
          <label for="terms" class="text-sm text-purple-700">I agree to the <a href="#" class="text-purple-500 underline">Terms & Conditions</a></label>
        </div>
        <!-- Submit Button -->
        <button type="submit" class="w-full purple-btn text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300" id="submitBtn">
          Sign Up
        </button>
      </form>
    </div>
  </div>
  <script>
    // Interactive radio highlight
    function updateRadioHighlight() {
      document.getElementById('guestLabel').style.background = document.getElementById('guest').checked ? '#e0c3fc' : '';
      document.getElementById('hostLabel').style.background = document.getElementById('host').checked ? '#e0c3fc' : '';
    }
    document.getElementById('guest').addEventListener('change', updateRadioHighlight);
    document.getElementById('host').addEventListener('change', updateRadioHighlight);
    updateRadioHighlight();

    // Password match validation
    const form = document.getElementById('signupForm');
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirmPassword');
    const passwordError = document.getElementById('passwordError');
    form.addEventListener('submit', function(e) {
      if (password.value !== confirmPassword.value) {
        passwordError.classList.remove('hidden');
        confirmPassword.classList.add('border-red-500');
        e.preventDefault();
      } else {
        passwordError.classList.add('hidden');
        confirmPassword.classList.remove('border-red-500');
      }
    });
    confirmPassword.addEventListener('input', function() {
      if (password.value === confirmPassword.value) {
        passwordError.classList.add('hidden');
        confirmPassword.classList.remove('border-red-500');
      }
    });
    
  </script>
</body>
</html>
